# BakeCake

## API

Базовый URL: `/api/v1/` \
Формат: `application/json`

### GET `/api/v1/catalog/options/`

Возвращает варианты из конструктора и прайс

Пример ответа:
```json
{
  "levels":  {"values":["не выбрано","1","2","3"], "prices":[0,400,750,1100]},
  "forms":   {"values":["не выбрано","Круг","Квадрат","Прямоугольник"], "prices":[0,600,400,1000]},
  "toppings":{"values":["не выбрано","Без","Белый соус","Карамельный","Кленовый","Черничный","Молочный шоколад","Клубничный"], "prices":[0,0,200,180,200,300,350,200]},
  "berries": {"values":["нет","Ежевика","Малина","Голубика","Клубника"], "prices":[0,400,300,450,500]},
  "decors":  {"values":["нет","Фисташки","Безе","Фундук","Пекан","Маршмеллоу","Марципан"], "prices":[0,300,400,350,300,200,280]},
  "words_price": 500
}
```

### POST `/api/v1/price/quote/`

Серверный пересчёт цены (можно считать на фронте).

Тело:
```json
{
  "LEVELS":"2","FORM":"1","TOPPING":"3","BERRIES":"4","DECOR":"2","WORDS":"ok"
}
```

Ответ:
```json
{ "total": 2930 }
```

### POST `/api/v1/orders/create/`

Создание заказа. Можно передать локально посчитанную сумму `CLIENT_TOTAL` - сервер проверит и вернёт `409`, если расходится.

Тело:
```json
{
  "LEVELS":"2","FORM":"1","TOPPING":"3","BERRIES":"4","DECOR":"2","WORDS":"ok",
  "COMMENTS":"без сахара",
  "NAME":"Ирина","PHONE":"+79990000000","EMAIL":"test@example.com",
  "ADDRESS":"Москва","DATE":"2025-09-01","TIME":"12:30","DELIVCOMMENTS":"",
  "CLIENT_TOTAL":2930
}
```

Успех `201`:
```json
{ "ok": true, "order_id": 12, "total": 2930 }
```

Ошибки:
 - `400` - валидация, например, неверный формат даты `DD-MM-YYYY`, вместо `YYYY-MM-DD`

 - `409` - Расходтяся значения парамметров, суммы и ответа

Важно:
- Поля выбора - это строки с индексами из `values` соответствующих списков
- Если `WORD` не пустое, к сумме добавляется `words_price`
